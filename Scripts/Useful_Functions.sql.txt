CREATE OR REPLACE FUNCTION "public"."dropfunction" (_functionname text, _schemaname text DEFAULT NULL::text)  RETURNS void
  VOLATILE
AS $body$
DECLARE
  r RECORD;
BEGIN
  FOR r IN SELECT p.oid::regprocedure::TEXT AS name, p.prokind
    FROM pg_proc p
    JOIN pg_namespace n ON
      p.pronamespace = n.oid
    WHERE
      proname = lower(_FunctionName)
      AND (_SchemaName IS NULL
        OR n.nspname = lower(_SchemaName))
  LOOP
    IF r.prokind = 'f' THEN
      EXECUTE 'DROP FUNCTION ' || r.name || ' CASCADE';
    ELSE
      EXECUTE 'DROP PROCEDURE ' || r.name || ' CASCADE';
    END IF;
  END LOOP;
END;
$body$ LANGUAGE plpgsql